{% extends 'base.html' %}

{% block head %}

<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/jsCalendar.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/jsCalendar.micro.css') }}">
<script type="text/javascript" src="{{ url_for('static', filename='js/jsCalendar.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/jsCalendar.datepicker.js') }}"></script>
<link href="{{ url_for('static', filename='css/styles3.css') }}" rel="stylesheet" />
<!-- Additional CSS and JavaScript links can be included here -->
<style>
    @font-face {
        font-family: 'SUITE-Regular';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-2@1.0/SUITE-Regular.woff2') format('woff2');
        font-weight: 400;
        font-style: normal;
    }

    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì„¤ì • */
    body {
        font-family: 'SUITE-Regular', Arial, sans-serif;
        /* Apply the font to the entire body */
        /* ... other styles ... */
    }

    /* ë©”ì¸ ì»¨í…ì¸  ìŠ¤íƒ€ì¼ */
    .content {
        flex: 1 0 auto;
        width: 90%;
        max-width: 1200px;
    }

    /* ì œëª© ì¤‘ì•™ ì •ë ¬ */
    .title {
        text-align: center;
        display: block;
        width: 100%;
        margin-top: 20px;
        margin-bottom: 20px;
    }

    .section {
        margin-top: 40px;
        /* Adds space at the top of the section */
        margin-bottom: 40px;
        /* Adds space at the bottom of the section */
        width: 100%;
        /* Ensures the section takes full width */
        clear: both;
        /* Clears floated elements, if any */
    }

    /* í‘¸í„° ìŠ¤íƒ€ì¼ */
    footer {
        width: 100%;
        flex-shrink: 0;
        text-align: center;
        padding: 20px 0;
        background-color: #f8f8f8;
    }


    .title {
        font-size: 24px;
        /* Title size */
        margin-bottom: 20px;
        /* Space between title and content */
    }

    #grading-interface {
        font-size: 16px;
        /* Adjust base font size as needed */
    }

    .grade-display {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 20px;
    }

    .grade-circle {
        background-color: red;
        color: white;
        border-radius: 50%;
        width: 120px;
        height: 120px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
    }

    .grade-letter {
        font-size: 2em;
        /* 32px if base font size is 16px */
        font-weight: bold;
    }

    .grade-score {
        font-size: 1em;
        /* 16px if base font size is 16px */
    }

    .icons {
        display: flex;
        justify-content: center;
    }

    .icon img {
        width: 100px;
        /* ì´ë¯¸ì§€ í¬ê¸°ë¥¼ 80pxì—ì„œ 100pxë¡œ ì¡°ì • */
        height: 100px;
        /* ì´ë¯¸ì§€ í¬ê¸°ë¥¼ 80pxì—ì„œ 100pxë¡œ ì¡°ì • */
        margin-bottom: 10px;
        /* ì´ë¯¸ì§€ì™€ í…ìŠ¤íŠ¸ ì‚¬ì´ì˜ ê°„ê²©ì„ ì¡°ê¸ˆ ë” ëŠ˜ë¦¼ */
    }

    .icon {
        margin: 0 20px;
        /* ì•„ì´ì½˜ ê°„ì˜ ì¢Œìš° ê°„ê²©ì„ 15pxì—ì„œ 20pxë¡œ ëŠ˜ë¦¼ */
        text-align: center;
        flex-direction: column;
        align-items: center;
        display: flex;
    }

    .icon-description {
        margin-top: 4px;
        text-align: center;
        font-size: 0.75em;
        /* Smaller font size for descriptions */
    }

    .feedbackForm .btn {
        float: right;
        /* ì˜¤ë¥¸ìª½ ì •ë ¬ */
        margin-right: 5px;
        /* ê¸°ë¡í•˜ê¸° ë²„íŠ¼ ë§ˆì§„ ì¡°ì • */
    }

    .next-session-buttons {
        text-align: center;
        /* ë²„íŠ¼ì„ ì¤‘ì•™ì— ìœ„ì¹˜ */
    }

    .feedbackForm .btn,
    .next-session-buttons .btn,
    .btn-primary {
        margin: 10px;
        /* ëª¨ë“  ë²„íŠ¼ì˜ ë§ˆì§„ ì¡°ì • */
        padding: 10px 15px;
        /* ëª¨ë“  ë²„íŠ¼ì˜ íŒ¨ë”© ì¡°ì • */
        font-size: 16px;
        /* í…ìŠ¤íŠ¸ í¬ê¸° ì¡°ì • */
        line-height: 1.5;
        /* ë¼ì¸ ë†’ì´ ì¡°ì • */
        border-radius: 5px;
        /* í…Œë‘ë¦¬ ë°˜ê²½ ì¡°ì • */
        /* ë²„íŠ¼ í¬ê¸°ë¥¼ ì¼ê´€ë˜ê²Œ ì¡°ì • */
    }

    .btn-warning {
        background-color: #a9a9a9;
        /* ë‹¬ë ¥ë³´ê¸° ë²„íŠ¼ ìƒ‰ìƒ ë³€ê²½ */
        border-color: #b0c4de;
        /* ë‹¬ë ¥ë³´ê¸° ë²„íŠ¼ í…Œë‘ë¦¬ ìƒ‰ìƒ ë³€ê²½ */
        color: white;
        /* ê¸€ì ìƒ‰ìƒ ë³€ê²½ */
        text-decoration: none;
        /* í…ìŠ¤íŠ¸ ê¾¸ë¯¸ê¸° ì œê±° */
    }

    .btn-warning:hover,
    .btn-warning:focus {
        background-color: #757575;
        /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ì‹œ ë‹¬ë ¥ë³´ê¸° ë²„íŠ¼ ìƒ‰ìƒ ë³€ê²½ */
        color: white;
        /* ê¸€ì ìƒ‰ìƒ ìœ ì§€ */
    }

    .btn-warning:active {
        background-color: #757575;
        /* í´ë¦­ ì‹œ ìƒ‰ìƒ ë³€ê²½ */
        color: white;
        /* ê¸€ì ìƒ‰ìƒ ìœ ì§€ */
    }

    .btn-warning:focus {
        box-shadow: none;
        /* í´ë¦­ ì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì œê±° */
    }



    .image-box {
        border: 1px solid #ddd;
        /* í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ */
        width: 200px;
        /* ë„ˆë¹„ ì„¤ì • */
        height: 200px;
        /* ë†’ì´ ì„¤ì • - ì •ì‚¬ê°í˜• */
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f8f8f8;
        /* ë°°ê²½ìƒ‰ */
        margin-right: 10px;
        /* ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ë°•ìŠ¤ì™€ ë‘ ë²ˆì§¸ ì´ë¯¸ì§€ ë°•ìŠ¤ ì‚¬ì´ì˜ ê°„ê²© */
    }

    /* í˜ì´ì§€ ì»¨í…ì¸ ì˜ ë„ˆë¹„ë¥¼ í™•ì¥ */
    .container {
        width: 90%;
        /* ì»¨í…Œì´ë„ˆì˜ ë„ˆë¹„ë¥¼ 90%ë¡œ ì¡°ì • */
        max-width: 1200px;
        /* ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
    }


    .image-box img {
        width: 100%;
        /* The image will fill the width of its container */
        height: 100%;
        /* The image will fill the height of its container */
        object-fit: cover;
        /* The image will cover the container, cropping if necessary */
        display: block;
        /* ì´ë¯¸ì§€ ì „ì²´ê°€ ë³´ì´ë„ë¡ ì¡°ì • */
    }

    /* ìš”ì•½ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
    .summary-section {
        font-family: 'SUITE-Regular';
        background-color: #f9f9fb;
        /* Light background color */
        border-radius: 10px;
        /* Rounded corners */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        /* Subtle shadow */
        padding: 20px;
        /* Padding inside the container */
        margin-top: 20px;
        /* Space from top */
        margin-bottom: 40px;
        /* Space from bottom */
        max-width: 400px;
        /* Maximum width */
        margin-left: auto;
        /* Centering the block */
        margin-right: auto;
        text-align: center;
        /* Center align text */
        border: 2px solid #cccccc;
        /* Border color */
    }

    /* ìš”ì•½ ì„¹ì…˜ì˜ ì œëª© ìŠ¤íƒ€ì¼ */
    .summary-section h2 {
        font-family: 'SUITE-Regular';
        color: #ff79c6;
        /* Title color */
        padding-bottom: 10px;
        /* Space below the title */
        border-bottom: 2px solid #ff79c6;
        /* Title underline */
        margin-bottom: 20px;
        /* Space below the underline */
        font-size: 1.5em;
        /* Font size */
    }

    /* ìš”ì•½ ì„¹ì…˜ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
    .summary-section ul {
        list-style-type: none;
        /* No bullets */
        padding: 0;
        /* Remove padding */
        margin: 0;
        /* Remove margin */
    }

    .summary-section ul li {
        color: #333333;
        /* Text color */
        font-weight: bold;
        /* Make the font bold */
        margin-bottom: 10px;
        /* Space between list items */
        font-size: 1.2em;
        /* Font size */
    }

    /* ê°ì •ê¸°ë¡ í¼ ìŠ¤íƒ€ì¼ */
    .feedbackForm {
        width: 95%;
        /* í¼ì˜ í­ì„ ì¢Œìš° ì—¬ë°±ì„ ì¤„ì´ê³  95%ë¡œ ì„¤ì • */
        margin: 0 auto;
        /* ìë™ ë§ˆì§„ìœ¼ë¡œ ì¤‘ì•™ ì •ë ¬ */
    }

    /* í”¼ë“œë°± í…ìŠ¤íŠ¸ ì˜ì—­ ìŠ¤íƒ€ì¼ */
    .feedbackForm .form-group {
        width: 100%;
        margin-top:20px;
        /* ì…ë ¥ í•„ë“œì˜ í­ì„ í¼ì˜ í­ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì • */
    }

    .feedbackForm textarea {
        width: 100%;
        /* í…ìŠ¤íŠ¸ ì˜ì—­ì˜ í­ì„ í¼ì˜ í­ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì • */
        margin-bottom: 30px;
        /*
         í…ìŠ¤íŠ¸ ì˜ì—­ í•˜ë‹¨ ì—¬ë°± ì„¤ì • */
    }

    .content,
    .content * {
        font-family: 'SUITE-Regular', Arial, sans-serif;
    }

    @font-face {
        font-family: 'komika_axisregular';
        src: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/212141/komikax_-webfont.woff2') format('woff2'), url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/212141/komikax_-webfont.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }

    .grade-circle {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        width: 150px;
        height: 150px;
        border-radius: 100%;
        background-color: #EC6F86;
        color: #FFF;
        font-family: 'komika_axisregular', sans-serif;
        font-size: 2em;
        /* Start with a base font size */
        flex-direction: column;
        /* Stack children vertically */
    }

    .grade-letter {
        font-size: 2em;
        /* relative to the parent font size */
        line-height: 1;
        /* Adjust if necessary to fit the circle */
        margin-bottom: 0.25em;
        /* Adds space below the grade letter */
    }

    .grade-score {
        font-size: 0.5em;
        /* relative to the parent font size */
        line-height: 1;
        /* Adjust if necessary to fit the circle */
        margin-top: -0.25em;
        /* Negative margin to bring grade score closer to grade letter if needed */
    }

    #button,
    .your-button-class {
        background-color: black;
        /* Soft blue */
        /* other styles if needed */
    }

    /*ë³µë¶™*/
    .services {
        margin-bottom: 3em;
    }

    .services .icon {
        float: left;
        width: 80px;
        /* Width of the icon */
        height: 80px;
        /* Height of the icon */
        display: flex;
        justify-content: center;
        align-items: center;
        background: whitesmoke;
        border-radius: 50%;
        /* Circular shape */
        overflow: hidden;
        /* Ensures content doesn't spill outside the circle */
        margin-right: 15px;
        /* Adjust as needed */
    }

    .services .icon img {
        max-width: 100%;
        /* Ensure the image doesn't exceed the icon's width */
        max-height: 100%;
        /* Ensure the image doesn't exceed the icon's height */
        object-fit: contain;
        /* Ensures the entire image fits within the container */
    }

    .services .icon i {
        display: table-cell;
        vertical-align: middle;
        font-size: 60px;
        color: #000;
    }

    .services .desc {
        padding-left: 100px;
    }

    .services .desc h3 {
        color: #000;
        font-size: 28px;
    }
</style>
{% endblock %}

{% block content %}
<header class="masthead" style="background-image: url('./static/img/yoga.jpg'); background-size: cover;">
</header>

<!-- Main Content-->


<div class="title section"><strong>ì˜¤ëŠ˜ì˜ ìš´ë™ ê²°ê³¼</strong></div>
<br>
<div id="grading-interface">
    <div class="grade-display">
        <div class="grade-circle" style="background-color: black">
            <span class="grade-letter">{{ grade }}</span>

            <span class="grade-score">{{ hits }}/{{ total }}</span>
        </div>
    </div>
    <br>
    <div class="icons">
        <div class="icon">
            <img src="{{ url_for('static', filename='img/icon1.jpg') }}" alt="Image 1">
            ì „ì‚¬ìì„¸ 1
            <div class="icon-description">ìƒì²´ë¥¼ ì¡°ê¸ˆ ë” ì„¸ìš°ì„¸ìš”</div>
            <div class="icon-description">ìƒì²´ë¥¼ ì¡°ê¸ˆ ë” ì„¸ìš°ì„¸ìš”</div>
        </div>
        <div class="icon">
            <img src="{{ url_for('static', filename='img/icon2.jpg') }}" alt="icon 2">
            ìš”ê°€ìì„¸ 2
            <div class="icon-description">ì„¤ëª…2</div>
        </div>
        <div class="icon">
            <img src="{{ url_for('static', filename='img/icon3.jpg') }}" alt="icon 3">
            ìš”ê°€ìì„¸ 3
            <div class="icon-description">ì„¤ëª…3</div>
        </div>
        <div class="icon">
            <img src="{{ url_for('static', filename='img/icon4.jpg') }}" alt="icon 4">
            ìš”ê°€ìì„¸ 4
            <div class="icon-description">ì„¤ëª…4</div>
        </div>
    </div>
</div>
</div>




</body>
<br>
<section class="h-100" style="margin-top: 30px; margin-bottom: 30px;">
    <div class="container mt-5">
        <br> <br>
        <br>
        <br>
        <!-- Session Summary -->
        <!-- Summary Section -->
        <div id="colorlib-page">
            <div id="colorlib-services " style="text-align: center;">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <h2 style="font-size: 28px; font-family: 'SUITE-Regular', sans-serif;">ìš”ì•½</h2>
                        </div>
                    </div>
                    <br>
                    <br>
                    <div class="row">
                        <div class="col-md-4 animate-box">
                            <div class="services">
                                <span class="icon"><img src="{{ url_for('static', filename='img/time.jpg') }}"
                                        alt="Time Icon"><i class="icon-pen3"></i></span>
                                <div class="desc">
                                    <h3>ì‹œê°„</h3>
                                    <p>{{ time_difference }} ë¶„</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 animate-box">
                            <div class="services">
                                <span class="icon"><img src="{{ url_for('static', filename='img/count.jpg') }}"
                                        alt="Time Icon"><i class="icon-diamond"></i></span>
                                <div class="desc">
                                    <h3>ë™ì‘ ê°œìˆ˜</h3>
                                    <p>2</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 animate-box">
                            <div class="services">
                                <span class="icon"><img src="{{ url_for('static', filename='img/list.jpg') }}"
                                        alt="Time Icon"><i class="icon-paperplane"></i></span>
                                <div class="desc">
                                    <h3>ë™ì‘ ì¢…ë¥˜</h3>
                                    <p>
                                    <ul>
                                        <li>ë‚˜ë¬´ìì„¸</li>
                                        <li>ì „ì‚¬2ìì„¸</li>
                                    </ul>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <br>
        <br>
        <br>
        <!-- Feedback Form -->
        <div class="mt-4 feedbackForm section">
           <!-- <h2 style="font-size: 28px;  text-align: center; font-family: 'SUITE-Regular', sans-serif;">ê°ì •ê¸°ë¡</h2>
            <p style="  text-align: center; font-family: 'SUITE-Regular', sans-serif;">ì§€ê¸ˆì˜ ê°ì •ì„ ê¸°ë¡í•´ë´ìš”!</p>-->
            <!-- Emotion Emoji Buttons -->
<div class="emotion-recording">
    <h3 style="text-align: center; font-family: 'SUITE-Regular', sans-serif;">ì˜¤ëŠ˜ì˜ ê°ì •</h3>
    <div class="emoji-buttons" style="text-align: center;">
      <button class="emoji-btn" data-emotion="excited">ğŸ˜†</button>
      <button class="emoji-btn" data-emotion="happy">ğŸ˜Š</button>
      <button class="emoji-btn" data-emotion="soso">ğŸ˜‘</button>
      <button class="emoji-btn" data-emotion="angry">ğŸ˜ </button>
      <button class="emoji-btn" data-emotion="sad">ğŸ˜¢</button>
    </div>
    <div class="emoji-display">
        Selected Emoji: <span id="selectedEmojiDisplay"></span>
      </div>
  </div>
            <form>
                <div class="form-group">
                    <textarea class="form-control" id="feedback" rows="3"></textarea>
                </div>
                <button class="btn btn-primary" id="button">ê¸°ë¡í•˜ê¸°</button>
            </form>
        </div>
        <br>
        <br>
        <br><br><br><br>
        <br><br>
        <br>
        <!-- Next Session Recommendation -->
        <div class="mt-4 mb-5 section">
            <h2 style="font-size: 28px;  text-align: center; font-family: 'SUITE-Regular', sans-serif;">ì¡°ê¸ˆ ë” í•´ë³¼ê¹Œìš”?</h2>

            <br>
            <div class="next-session-buttons">
                <button class="btn btn-primary">ë‹¤ë¥¸ ë™ì‘í•˜ê¸°</button>
                <a href="{{ url_for('home') }}" class="btn btn-warning">ëë‚´ê¸°</a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block footer %}
<!-- Include any necessary footer elements here -->
<footer class="border-top">
    <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7">
                <div class="small text-center text-muted fst-italic">Copyright Â© Fitech 2023</div>
            </div>
        </div>
    </div>
</footer>
<script>
    document.addEventListener("DOMContentLoaded", function() {
    // Define a mapping of emoji characters to names
    var emojiMap = {
        'ğŸ˜†': 'excited',
        'ğŸ˜Š': 'happy',
        'ğŸ˜‘': 'soso',
        'ğŸ˜ ': 'angry',
        'ğŸ˜¢': 'sad'
    };
    
    var selectedEmoji = '';
    var selectedEmojiName = '';
    
    // Get all emoji buttons and set up click event listeners
    var emojiButtons = document.querySelectorAll('.emoji-btn');
    emojiButtons.forEach(function(btn) {
        btn.addEventListener('click', function() {
            selectedEmoji = this.textContent; // Set the selected emoji
            selectedEmojiName = emojiMap[selectedEmoji]; // Set the selected emoji's name
            document.getElementById('selectedEmojiDisplay').textContent = selectedEmoji; // Update the display
        });
    });

    // Handle form submission
    document.querySelector("form").onsubmit = function(event) {
        event.preventDefault(); // Prevent default form submission

        var memoText = document.getElementById("feedback").value.trim(); // Get the memo text
        // Combine emoji name with memo text
        var combinedMemo = selectedEmojiName ? selectedEmojiName + ' ' + memoText : memoText;

        // Create your request payload with the combined memo
        var requestData = {
            date: new Date().toISOString().slice(0, 10), // Get the current date in YYYY-MM-DD format
            memo: combinedMemo
        };

        // Send the combined memo to the server
        fetch('/add_memo', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json; charset=utf-8'
            },
            body: JSON.stringify(requestData)
        })
        .then(response => response.json())
        .then(data => {
            if(data.status === 'success') {
                console.log('Memo saved successfully');
                // Clear the form and provide a success message
                document.getElementById("feedback").value = ''; // Clear the textarea
                document.getElementById('selectedEmojiDisplay').textContent = ''; // Clear the selected emoji display
                alert('Memo added successfully');
            } else {
                throw new Error('Error saving memo: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error: ' + error);
        });
    };
});
</script>

{% endblock %}
